<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>VRC New API Test Page</title>
  <style>
    body {
      font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Arial, sans-serif;
      line-height: 1.6;
      color: #333;
      max-width: 1200px;
      margin: 0 auto;
      padding: 20px;
    }
    h1 {
      border-bottom: 2px solid #0066cc;
      padding-bottom: 10px;
      margin-bottom: 20px;
    }
    .api-section {
      margin-bottom: 30px;
      border: 1px solid #ddd;
      border-radius: 4px;
      padding: 15px;
      background-color: #f9f9f9;
    }
    .api-section h2 {
      margin-top: 0;
      color: #0066cc;
    }
    .controls {
      margin-bottom: 15px;
    }
    button {
      background-color: #0066cc;
      color: white;
      border: none;
      padding: 8px 15px;
      border-radius: 4px;
      cursor: pointer;
      margin-right: 10px;
      font-size: 14px;
    }
    button:hover {
      background-color: #0055aa;
    }
    .params input, .params select {
      padding: 8px;
      border: 1px solid #ddd;
      border-radius: 4px;
      margin-right: 10px;
      margin-bottom: 10px;
    }
    .params label {
      margin-right: 5px;
      font-weight: bold;
    }
    .result {
      margin-top: 15px;
      border: 1px solid #ddd;
      border-radius: 4px;
      padding: 15px;
      background-color: white;
      max-height: 300px;
      overflow: auto;
      white-space: pre-wrap;
    }
    .error {
      color: #cc0000;
      font-weight: bold;
    }
    .api-url {
      font-family: monospace;
      background-color: #eee;
      padding: 2px 5px;
      border-radius: 3px;
    }
    .loading {
      color: #666;
      font-style: italic;
    }
  </style>
</head>
<body>
  <h1>VRC New API Test Page</h1>
  <p>Use this page to test the newly created API endpoints for VRC backend.</p>
  
  <div class="api-section">
    <h2>Navigation API</h2>
    <p>Endpoint: <span class="api-url">/api/navigation</span></p>
    <div class="controls">
      <div class="params">
        <label for="nav-type">Type:</label>
        <select id="nav-type">
          <option value="main">Main</option>
          <option value="footer">Footer</option>
          <option value="mobile">Mobile</option>
        </select>
      </div>
      <button onclick="testNavigation()">Test Navigation API</button>
    </div>
    <div class="result" id="navigation-result">Results will appear here...</div>
  </div>
  
  <div class="api-section">
    <h2>Products API</h2>
    <p>Endpoint: <span class="api-url">/api/products</span></p>
    <div class="controls">
      <div class="params">
        <label for="product-category">Category:</label>
        <input type="text" id="product-category" placeholder="Category slug">
        
        <label for="product-featured">Featured:</label>
        <select id="product-featured">
          <option value="">All</option>
          <option value="true">Featured Only</option>
        </select>
        
        <label for="product-slug">Slug:</label>
        <input type="text" id="product-slug" placeholder="Product slug">
        
        <label for="product-limit">Limit:</label>
        <input type="number" id="product-limit" value="10" min="1" max="50">
      </div>
      <button onclick="testProducts()">Test Products API</button>
    </div>
    <div class="result" id="products-result">Results will appear here...</div>
  </div>
  
  <div class="api-section">
    <h2>Projects API</h2>
    <p>Endpoint: <span class="api-url">/api/projects</span></p>
    <div class="controls">
      <div class="params">
        <label for="project-category">Category:</label>
        <input type="text" id="project-category" placeholder="Category slug">
        
        <label for="project-featured">Featured:</label>
        <select id="project-featured">
          <option value="">All</option>
          <option value="true">Featured Only</option>
        </select>
        
        <label for="project-slug">Slug:</label>
        <input type="text" id="project-slug" placeholder="Project slug">
      </div>
      <button onclick="testProjects()">Test Projects API</button>
    </div>
    <div class="result" id="projects-result">Results will appear here...</div>
  </div>
  
  <div class="api-section">
    <h2>Services API</h2>
    <p>Endpoint: <span class="api-url">/api/services</span></p>
    <div class="controls">
      <div class="params">
        <label for="service-type">Type:</label>
        <input type="text" id="service-type" placeholder="Service type">
        
        <label for="service-featured">Featured:</label>
        <select id="service-featured">
          <option value="">All</option>
          <option value="true">Featured Only</option>
        </select>
        
        <label for="service-slug">Slug:</label>
        <input type="text" id="service-slug" placeholder="Service slug">
      </div>
      <button onclick="testServices()">Test Services API</button>
    </div>
    <div class="result" id="services-result">Results will appear here...</div>
  </div>
  
  <div class="api-section">
    <h2>Technologies API</h2>
    <p>Endpoint: <span class="api-url">/api/technologies</span></p>
    <div class="controls">
      <div class="params">
        <label for="tech-type">Type:</label>
        <select id="tech-type">
          <option value="">All</option>
          <option value="technology">Technology</option>
          <option value="partner">Partner</option>
          <option value="supplier">Supplier</option>
        </select>
        
        <label for="tech-featured">Featured:</label>
        <select id="tech-featured">
          <option value="">All</option>
          <option value="true">Featured Only</option>
        </select>
      </div>
      <button onclick="testTechnologies()">Test Technologies API</button>
    </div>
    <div class="result" id="technologies-result">Results will appear here...</div>
  </div>
  
  <div class="api-section">
    <h2>Homepage API</h2>
    <p>Endpoint: <span class="api-url">/api/homepage</span></p>
    <div class="controls">
      <button onclick="testHomepage()">Test Homepage API</button>
    </div>
    <div class="result" id="homepage-result">Results will appear here...</div>
  </div>

  <script>
    // Base URL for API
    const baseUrl = 'http://localhost:3000/api';
    
    // Helper function to format JSON with indentation
    function formatJson(json) {
      return JSON.stringify(json, null, 2);
    }
    
    // Helper function to build query parameters
    function buildQuery(params) {
      const query = Object.entries(params)
        .filter(([_, value]) => value !== null && value !== '')
        .map(([key, value]) => `${encodeURIComponent(key)}=${encodeURIComponent(value)}`)
        .join('&');
      
      return query ? `?${query}` : '';
    }
    
    // Navigation API test
    async function testNavigation() {
      const resultEl = document.getElementById('navigation-result');
      resultEl.innerHTML = '<div class="loading">Loading...</div>';
      
      try {
        const type = document.getElementById('nav-type').value;
        const query = buildQuery({ type });
        const response = await fetch(`${baseUrl}/navigation${query}`);
        
        if (!response.ok) {
          throw new Error(`HTTP error ${response.status}`);
        }
        
        const data = await response.json();
        resultEl.innerHTML = formatJson(data);
      } catch (error) {
        resultEl.innerHTML = `<div class="error">Error: ${error.message}</div>`;
      }
    }
    
    // Products API test
    async function testProducts() {
      const resultEl = document.getElementById('products-result');
      resultEl.innerHTML = '<div class="loading">Loading...</div>';
      
      try {
        const category = document.getElementById('product-category').value;
        const featured = document.getElementById('product-featured').value;
        const slug = document.getElementById('product-slug').value;
        const limit = document.getElementById('product-limit').value;
        
        const query = buildQuery({ 
          category, 
          featured,
          slug,
          limit
        });
        
        const response = await fetch(`${baseUrl}/products${query}`);
        
        if (!response.ok) {
          throw new Error(`HTTP error ${response.status}`);
        }
        
        const data = await response.json();
        resultEl.innerHTML = formatJson(data);
      } catch (error) {
        resultEl.innerHTML = `<div class="error">Error: ${error.message}</div>`;
      }
    }
    
    // Projects API test
    async function testProjects() {
      const resultEl = document.getElementById('projects-result');
      resultEl.innerHTML = '<div class="loading">Loading...</div>';
      
      try {
        const category = document.getElementById('project-category').value;
        const featured = document.getElementById('project-featured').value;
        const slug = document.getElementById('project-slug').value;
        
        const query = buildQuery({ 
          category, 
          featured,
          slug
        });
        
        const response = await fetch(`${baseUrl}/projects${query}`);
        
        if (!response.ok) {
          throw new Error(`HTTP error ${response.status}`);
        }
        
        const data = await response.json();
        resultEl.innerHTML = formatJson(data);
      } catch (error) {
        resultEl.innerHTML = `<div class="error">Error: ${error.message}</div>`;
      }
    }
    
    // Services API test
    async function testServices() {
      const resultEl = document.getElementById('services-result');
      resultEl.innerHTML = '<div class="loading">Loading...</div>';
      
      try {
        const type = document.getElementById('service-type').value;
        const featured = document.getElementById('service-featured').value;
        const slug = document.getElementById('service-slug').value;
        
        const query = buildQuery({ 
          type, 
          featured,
          slug
        });
        
        const response = await fetch(`${baseUrl}/services${query}`);
        
        if (!response.ok) {
          throw new Error(`HTTP error ${response.status}`);
        }
        
        const data = await response.json();
        resultEl.innerHTML = formatJson(data);
      } catch (error) {
        resultEl.innerHTML = `<div class="error">Error: ${error.message}</div>`;
      }
    }
    
    // Technologies API test
    async function testTechnologies() {
      const resultEl = document.getElementById('technologies-result');
      resultEl.innerHTML = '<div class="loading">Loading...</div>';
      
      try {
        const type = document.getElementById('tech-type').value;
        const featured = document.getElementById('tech-featured').value;
        
        const query = buildQuery({ 
          type, 
          featured
        });
        
        const response = await fetch(`${baseUrl}/technologies${query}`);
        
        if (!response.ok) {
          throw new Error(`HTTP error ${response.status}`);
        }
        
        const data = await response.json();
        resultEl.innerHTML = formatJson(data);
      } catch (error) {
        resultEl.innerHTML = `<div class="error">Error: ${error.message}</div>`;
      }
    }
    
    // Homepage API test
    async function testHomepage() {
      const resultEl = document.getElementById('homepage-result');
      resultEl.innerHTML = '<div class="loading">Loading...</div>';
      
      try {
        const response = await fetch(`${baseUrl}/homepage`);
        
        if (!response.ok) {
          throw new Error(`HTTP error ${response.status}`);
        }
        
        const data = await response.json();
        resultEl.innerHTML = formatJson(data);
      } catch (error) {
        resultEl.innerHTML = `<div class="error">Error: ${error.message}</div>`;
      }
    }
  </script>
</body>
</html>
